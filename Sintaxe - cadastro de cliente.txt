<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Oswald&display=swap" rel="stylesheet">
    <title>Formulário de Cadastro</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="form-container">
        <h2>Cadastro de Cliente</h2>
        <form id="cadastroForm">
            <label for="nome">Nome:</label>
            <input type="text" id="nome" name="nome" required>

            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>

            <label for="telefone">Telefone:</label>
            <input type="text" id="telefone" name="telefone" required>

            <label for="servico">Serviço:</label>
            <select id="servico" name="servico" required>
                <option value="1">Corte de Cabelo - R$ 30,00</option>
                <option value="2">Design de Barba - R$ 30,00</option>
                <option value="3">Corte + Barba - R$ 55,00</option>
                <option value="4">Modelagem de Sobrancelha - R$ 7,00</option>
                <option value="5">Escova Progressiva - R$ 70,00</option>
                <option value="6">Luzes - R$ 80,00</option>
                <option value="7">Corte Infantil - R$ 25,00</option>
                <option value="8">Depilação Narina e Orelha - R$ 20,00</option>
            </select>

            <button type="submit">Cadastrar</button>
        </form>

        <!-- Área para mostrar mensagens de erro ou sucesso -->
        <div id="message" class="message"></div>
    </div>

    <script>
        const form = document.getElementById('cadastroForm');
        const messageDiv = document.getElementById('message');

        form.addEventListener('submit', function(event) {
            event.preventDefault(); // Previne o envio padrão do formulário

            const formData = new FormData(form);
            const data = new URLSearchParams(formData);

            fetch('http://localhost:3000/cadastrar', {
                method: 'POST',
                body: data
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    messageDiv.style.color = 'green';
                    messageDiv.textContent = data.message;
                } else {
                    messageDiv.style.color = 'red';
                    messageDiv.textContent = data.message;
                }
            })
            .catch(error => {
                messageDiv.style.color = 'red';
                messageDiv.textContent = 'Erro ao enviar os dados. Tente novamente mais tarde.';
            });
        });
    </script>
</body>
</html>